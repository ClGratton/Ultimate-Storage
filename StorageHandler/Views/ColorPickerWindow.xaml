<Window x:Class="StorageHandler.Views.ColorPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:config="clr-namespace:StorageHandler.Config"
        Title="Change Box Color" 
        Height="480" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#212529">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="Select a Color" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,15"/>

        <!-- Preset Colors Grid -->
        <ItemsControl x:Name="PresetColorsPanel" Grid.Row="1">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="4" HorizontalAlignment="Center"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Width="90" Height="90" 
                                BorderBrush="Gray" 
                                BorderThickness="2" 
                                CornerRadius="8" 
                                Margin="5"
                                Cursor="Hand"
                                MouseLeftButtonUp="PresetColor_Click"
                                Tag="{Binding Background}">
                            <Border.Background>
                                <SolidColorBrush Color="{Binding Background}"/>
                            </Border.Background>
                            <TextBlock Text="{Binding Background}" 
                                       FontSize="10" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Bottom"
                                       Margin="0,0,0,5">
                                <TextBlock.Foreground>
                                    <SolidColorBrush Color="{Binding Text}"/>
                                </TextBlock.Foreground>
                            </TextBlock>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
        </ItemsControl>

        <!-- Custom Hex Input -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,15,0,0" HorizontalAlignment="Center">
            <TextBlock Text="Custom Hex:" Foreground="White" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBox x:Name="HexInput" Width="120" Height="30" VerticalContentAlignment="Center" 
                     MaxLength="7" Text="#"
                     TextChanged="HexInput_TextChanged"/>
            <Border x:Name="HexPreview" Width="40" Height="30" BorderBrush="Gray" BorderThickness="2" 
                    CornerRadius="4" Margin="10,0,0,0" Background="Transparent"/>
        </StackPanel>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="Cancel" Width="80" Height="30" Margin="0,0,10,0" Click="Cancel_Click"/>
            <Button Content="Apply" Width="80" Height="30" Click="Apply_Click"/>
        </StackPanel>
    </Grid>
</Window>
